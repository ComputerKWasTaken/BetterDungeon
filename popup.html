<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=380">
  <title>BetterDungeon</title>
  <link rel="stylesheet" href="fonts/lucide/lucide.css">
  <link rel="stylesheet" href="core/theme-variables.css">
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-brand">
      <img src="icons/icon48.png" alt="" class="header-logo">
      <div class="header-title">
        <span class="header-name">BetterDungeon</span>
        <span class="header-version">v0.9.5 <span class="header-badge">Early Access</span></span>
      </div>
    </div>
    <button class="header-help" id="tutorial-help-btn" aria-label="Start Tutorial" title="Help">
      <span class="icon-circle-question-mark"></span>
    </button>
  </header>

  <!-- Navigation -->
  <nav class="nav">
    <button class="nav-item active" data-tab="features">
      <span class="nav-icon icon-sparkles"></span>
      <span class="nav-label">Features</span>
    </button>
    <button class="nav-item" data-tab="presets">
      <span class="nav-icon icon-bookmark"></span>
      <span class="nav-label">Presets</span>
    </button>
  </nav>

  <!-- Main Content -->
  <main class="main">
    
    <!-- Features Tab -->
    <section class="tab-panel active" id="tab-features">
      
      <!-- Input Modes Group -->
      <div class="section">
        <div class="section-header">
          <span class="section-icon icon-message-square"></span>
          <h2 class="section-title">Input Modes</h2>
        </div>
        
        <!-- Command Mode -->
        <article class="feature-card" data-feature="command">
          <div class="feature-row">
            <div class="feature-info">
              <div class="feature-title-row">
                <span class="feature-icon" style="color: var(--bd-mode-command);">
                  <span class="icon-terminal"></span>
                </span>
                <h3 class="feature-title">Command Mode</h3>
              </div>
              <p class="feature-desc">Send narrative commands to the AI</p>
            </div>
            <label class="toggle">
              <input type="checkbox" id="feature-command" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="feature-details">
            <p>Adds a <strong>Command</strong> button to the input menu. Text is formatted as <code>## Your Command:</code> for direct AI instructions.</p>
            <p class="feature-hint"><span class="icon-lightbulb"></span> Great for time skips, scene changes, and guiding story direction.</p>
          </div>
        </article>

        <!-- Attempt Mode -->
        <article class="feature-card" data-feature="attempt">
          <div class="feature-row">
            <div class="feature-info">
              <div class="feature-title-row">
                <span class="feature-icon" style="color: var(--bd-mode-attempt);">
                  <span class="icon-dice-5"></span>
                </span>
                <h3 class="feature-title">Attempt Mode</h3>
              </div>
              <p class="feature-desc">Dice-roll action outcomes</p>
            </div>
            <label class="toggle">
              <input type="checkbox" id="feature-attempt" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="feature-details">
            <p>RNG determines if actions succeed or fail. Formats as: <code>You attempt to [action], you [result].</code></p>
            <p class="feature-hint"><span class="icon-dice-5"></span> Outcomes: critically fail, fail, succeed, critically succeed.</p>
            <div class="feature-option">
              <div class="option-label">
                <span>Critical Chance</span>
                <span class="option-value" id="critical-chance-value">5%</span>
              </div>
              <input type="range" class="slider" id="critical-chance" min="0" max="20" value="5">
            </div>
          </div>
        </article>
      </div>

      <!-- Formatting Group -->
      <div class="section">
        <div class="section-header">
          <span class="section-icon icon-type"></span>
          <h2 class="section-title">Formatting</h2>
        </div>

        <!-- Markdown -->
        <article class="feature-card" data-feature="markdown">
          <div class="feature-row">
            <div class="feature-info">
              <div class="feature-title-row">
                <span class="feature-icon" style="color: var(--bd-accent-primary);">
                  <span class="icon-pilcrow"></span>
                </span>
                <h3 class="feature-title">Markdown Formatting</h3>
              </div>
              <p class="feature-desc">Rich text in AI responses</p>
            </div>
            <label class="toggle">
              <input type="checkbox" id="feature-markdown" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="feature-details">
            <p>Renders <strong>bold</strong>, <em>italic</em>, <u>underline</u>, and more using a custom asterisk-free markdown syntax.</p>
            
            <div class="syntax-box">
              <div class="syntax-row"><code>++text++</code><span><strong>bold</strong></span></div>
              <div class="syntax-row"><code>//text//</code><span><em>italic</em></span></div>
              <div class="syntax-row"><code>==text==</code><span><u>underline</u></span></div>
              <div class="syntax-row"><code>~text~</code><span class="whisper">whisper</span></div>
              <div class="syntax-row"><code>---</code><span>scene break</span></div>
              <div class="syntax-row"><code>- item</code><span>â€¢ list item</span></div>
            </div>

            <div class="feature-option">
              <span class="option-label">Auto-apply on adventure</span>
              <label class="toggle sm">
                <input type="checkbox" id="auto-apply-instructions">
                <span class="toggle-slider"></span>
              </label>
            </div>

            <button class="btn btn-action" id="apply-instructions-btn">
              <span class="icon-wand"></span>
              Apply Instructions
            </button>

            <p class="feature-credit">Thanks to <a href="https://play.aidungeon.com/profile/OffMetaGamer">OffMetaGamer</a> & <a href="https://play.aidungeon.com/profile/effortlyss">Shiny</a></p>
          </div>
        </article>
      </div>

      <!-- Visual Enhancements Group -->
      <div class="section">
        <div class="section-header">
          <span class="section-icon icon-eye"></span>
          <h2 class="section-title">Visual Enhancements</h2>
        </div>

        <!-- Trigger Highlighting -->
        <article class="feature-card" data-feature="triggerHighlight">
          <div class="feature-row">
            <div class="feature-info">
              <div class="feature-title-row">
                <span class="feature-icon" style="color: var(--bd-mode-command-light);">
                  <span class="icon-sparkle"></span>
                </span>
                <h3 class="feature-title">Trigger Highlighting</h3>
              </div>
              <p class="feature-desc">Visualize story card triggers</p>
            </div>
            <label class="toggle">
              <input type="checkbox" id="feature-triggerHighlight" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="feature-details">
            <p>Highlights story card triggers in the context viewer. Hover for card name tooltips.</p>
            <p class="feature-hint"><span class="icon-sparkle"></span> Suggested triggers appear in cyan with dashed underlines.</p>
            
            <div class="feature-option">
              <span class="option-label">Auto-scan on adventure</span>
              <label class="toggle sm">
                <input type="checkbox" id="auto-scan-triggers">
                <span class="toggle-slider"></span>
              </label>
            </div>

            <div class="alert alert-warning">
              <span class="icon-triangle-alert"></span>
              Auto-scan increases load times with many story cards.
            </div>

            <button class="btn btn-action" id="scan-triggers-btn">
              <span class="icon-scan"></span>
              Scan Story Cards
            </button>
          </div>
        </article>

        <!-- Input Mode Colors -->
        <article class="feature-card" data-feature="inputModeColor">
          <div class="feature-row">
            <div class="feature-info">
              <div class="feature-title-row">
                <span class="feature-icon" style="color: var(--bd-mode-see-light);">
                  <span class="icon-palette"></span>
                </span>
                <h3 class="feature-title">Input Mode Colors</h3>
              </div>
              <p class="feature-desc">Color-coded input box border</p>
            </div>
            <label class="toggle">
              <input type="checkbox" id="feature-inputModeColor" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="feature-details">
            <div class="color-grid" id="mode-color-display">
              <div class="color-chip" data-mode="do" style="--chip-color: #3b82f6"><span>Do</span></div>
              <div class="color-chip" data-mode="attempt" style="--chip-color: #a855f7"><span>Attempt</span></div>
              <div class="color-chip" data-mode="say" style="--chip-color: #22c55e"><span>Say</span></div>
              <div class="color-chip" data-mode="story" style="--chip-color: #fbbf24"><span>Story</span></div>
              <div class="color-chip" data-mode="see" style="--chip-color: #ec4899"><span>See</span></div>
              <div class="color-chip" data-mode="command" style="--chip-color: #06b6d4"><span>Command</span></div>
            </div>
            <button class="btn btn-action" id="customize-colors-btn">
              <span class="icon-palette"></span>
              Customize Colors
            </button>
          </div>
        </article>
      </div>

      <!-- Keyboard & Controls Group -->
      <div class="section">
        <div class="section-header">
          <span class="section-icon icon-keyboard"></span>
          <h2 class="section-title">Controls</h2>
        </div>

        <!-- Hotkeys -->
        <article class="feature-card" data-feature="hotkey">
          <div class="feature-row">
            <div class="feature-info">
              <div class="feature-title-row">
                <span class="feature-icon" style="color: var(--bd-accent-primary);">
                  <span class="icon-keyboard"></span>
                </span>
                <h3 class="feature-title">Hotkeys</h3>
              </div>
              <p class="feature-desc">Keyboard shortcuts for quick actions</p>
            </div>
            <label class="toggle">
              <input type="checkbox" id="feature-hotkey" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="feature-details">
            <div class="hotkey-grid" id="hotkey-display-grid">
              <div class="hotkey-group">
                <h4>Actions</h4>
                <div class="hotkey" data-action="takeATurn"><kbd>T</kbd> Take a Turn</div>
                <div class="hotkey" data-action="continue"><kbd>C</kbd> Continue</div>
                <div class="hotkey" data-action="retry"><kbd>R</kbd> Retry</div>
                <div class="hotkey" data-action="erase"><kbd>E</kbd> Erase</div>
                <div class="hotkey" data-action="exitInput"><kbd>Esc</kbd> Exit Input</div>
              </div>
              <div class="hotkey-group">
                <h4>History</h4>
                <div class="hotkey" data-action="undo"><kbd>Z</kbd> Undo</div>
                <div class="hotkey" data-action="redo"><kbd>Y</kbd> Redo</div>
              </div>
              <div class="hotkey-group">
                <h4>Input Modes</h4>
                <div class="hotkey" data-action="modeDo"><kbd>1</kbd> Do</div>
                <div class="hotkey" data-action="modeAttempt"><kbd>2</kbd> Attempt*</div>
                <div class="hotkey" data-action="modeSay"><kbd>3</kbd> Say</div>
                <div class="hotkey" data-action="modeStory"><kbd>4</kbd> Story</div>
                <div class="hotkey" data-action="modeSee"><kbd>5</kbd> See</div>
                <div class="hotkey" data-action="modeCommand"><kbd>6</kbd> Command*</div>
              </div>
            </div>
            <p class="feature-footnote">*Requires feature to be enabled</p>
            <button class="btn btn-action" id="customize-hotkeys-btn">
              <span class="icon-settings"></span>
              Customize Hotkeys
            </button>
          </div>
        </article>

      </div>

      <!-- Automations -->
      <div class="section">
        <div class="section-header">
          <span class="section-icon icon-zap"></span>
          <h2 class="section-title">Automations</h2>
        </div>

        <!-- Auto See -->
        <article class="feature-card" data-feature="autoSee">
          <div class="feature-row">
            <div class="feature-info">
              <div class="feature-title-row">
                <span class="feature-icon" style="color: var(--bd-mode-see);">
                  <span class="icon-eye"></span>
                </span>
                <h3 class="feature-title">Auto See</h3>
              </div>
              <p class="feature-desc">Automatically generate scene images after AI responses</p>
            </div>
            <label class="toggle">
              <input type="checkbox" id="feature-autoSee">
              <span class="toggle-slider"></span>
            </label>
          </div>
          <div class="feature-details">
            <div class="automation-info">
              <p>Triggers a <strong>See</strong> action after each AI output to visualize the current scene.</p>
            </div>

            <div class="feature-option-inline">
              <span class="option-label-inline">Frequency</span>
              <select class="form-select form-select-sm" id="auto-see-trigger-mode">
                <option value="everyTurn">Every turn</option>
                <option value="afterNTurns">Every N turns</option>
              </select>
            </div>

            <div class="feature-option-inline" id="auto-see-interval-option" style="display: none;">
              <span class="option-label-inline">Interval</span>
              <div class="interval-control">
                <input type="range" class="slider slider-sm" id="auto-see-interval" min="2" max="10" value="2">
                <span class="interval-value" id="auto-see-interval-value">2</span>
              </div>
            </div>

            <div class="alert alert-warning alert-compact">
              <span class="icon-triangle-alert"></span>
              <span>Uses Credits per trigger if using a premium image model</span>
            </div>
          </div>
        </article>
      </div>

      <!-- Creator Tools -->
      <div class="section">
        <div class="section-header">
          <span class="section-icon icon-wrench"></span>
          <h2 class="section-title">Creator Tools</h2>
        </div>

        <!-- Story Card Analytics -->
        <article class="feature-card" data-feature="storyCardAnalytics">
          <div class="feature-row">
            <div class="feature-info">
              <div class="feature-title-row">
                <span class="feature-icon" style="color: var(--bd-accent-secondary);">
                  <span class="icon-chart-bar"></span>
                </span>
                <h3 class="feature-title">Story Card Analytics</h3>
              </div>
              <p class="feature-desc">Analyze your story cards for scenario building</p>
            </div>
          </div>
          <div class="feature-details">
            <p>Dashboard for scenario creators showing card statistics, trigger overlaps, coverage analysis, and potential issues.</p>
            <p class="feature-hint"><span class="icon-lightbulb"></span> Helps identify missing triggers, empty cards, and optimization opportunities.</p>
            
            <button class="btn btn-action" id="open-analytics-btn">
              <span class="icon-chart-bar"></span>
              Open Analytics Dashboard
            </button>
          </div>
        </article>
      </div>

      <!-- Always-On Enhancements -->
      <div class="section section-compact">
        <div class="section-header">
          <span class="section-icon icon-zap"></span>
          <h2 class="section-title">Always On</h2>
        </div>
        <div class="enhancement-row">
          <span class="icon-book-open"></span>
          <span>Readable Tab Fix</span>
        </div>
      </div>

    </section>

    <!-- Presets Tab -->
    <section class="tab-panel" id="tab-presets">
      
      <!-- Plot Presets -->
      <div class="section">
        <div class="section-header">
          <span class="section-icon icon-star"></span>
          <h2 class="section-title">Plot Presets</h2>
        </div>

        <button class="btn btn-full" id="save-current-preset-btn">
          <span class="icon-plus"></span>
          Save Current Plot
        </button>
        
        <button class="btn btn-ghost" id="undo-preset-btn" style="display: none;">
          <span class="icon-undo-2"></span>
          Undo Last Apply
        </button>

        <div class="preset-list" id="preset-list">
          <div class="empty-state" id="preset-empty">
            <span class="empty-icon icon-clipboard"></span>
            <p class="empty-title">No presets saved</p>
            <p class="empty-desc">Save your current plot configuration to reuse it later.</p>
          </div>
        </div>
      </div>

      <!-- Character Presets -->
      <div class="section">
        <div class="section-header">
          <span class="section-icon icon-user"></span>
          <h2 class="section-title">Characters</h2>
          <label class="toggle sm section-toggle">
            <input type="checkbox" id="feature-characterPreset" checked>
            <span class="toggle-slider"></span>
          </label>
        </div>

        <button class="btn btn-full" id="create-character-btn">
          <span class="icon-plus"></span>
          Create Character
        </button>

        <div class="character-list" id="character-list">
          <div class="empty-state" id="character-empty">
            <span class="empty-icon icon-user-plus"></span>
            <p class="empty-title">No characters saved</p>
            <p class="empty-desc">Create a character to auto-fill scenario entry fields.</p>
          </div>
        </div>
      </div>

    </section>

  </main>

  <!-- Preset Preview/Edit Modal -->
  <div class="modal-backdrop" id="preset-modal">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title" id="modal-title">Edit Preset</h3>
        <button class="modal-close" id="modal-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">Preset Name</label>
          <input type="text" class="form-input" id="modal-preset-name" placeholder="My Preset">
        </div>
        <div class="form-group">
          <label class="form-label form-label-check">
            <input type="checkbox" id="modal-check-ai" checked>
            AI Instructions
          </label>
          <textarea class="form-textarea" id="modal-ai-instructions" placeholder="No AI Instructions saved"></textarea>
        </div>
        <div class="form-group">
          <label class="form-label form-label-check">
            <input type="checkbox" id="modal-check-essentials" checked>
            Plot Essentials
          </label>
          <textarea class="form-textarea" id="modal-plot-essentials" placeholder="No Plot Essentials saved"></textarea>
        </div>
        <div class="form-group">
          <label class="form-label form-label-check">
            <input type="checkbox" id="modal-check-note" checked>
            Author's Note
          </label>
          <textarea class="form-textarea" id="modal-authors-note" placeholder="No Author's Note saved"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-ghost" id="modal-cancel">Cancel</button>
        <button class="btn btn-primary" id="modal-save">Save Changes</button>
      </div>
    </div>
  </div>

  <!-- Save Preset Modal -->
  <div class="modal-backdrop" id="save-modal">
    <div class="modal modal-sm">
      <div class="modal-header">
        <h3 class="modal-title">Save New Preset</h3>
        <button class="modal-close" id="save-modal-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">Preset Name</label>
          <input type="text" class="form-input" id="save-preset-name" placeholder="My Preset">
        </div>
        <div class="form-group">
          <label class="form-label">Components to Save</label>
          <div class="checkbox-group">
            <label class="checkbox-item">
              <input type="checkbox" id="save-check-ai" checked>
              <span>AI Instructions</span>
            </label>
            <label class="checkbox-item">
              <input type="checkbox" id="save-check-essentials" checked>
              <span>Plot Essentials</span>
            </label>
            <label class="checkbox-item">
              <input type="checkbox" id="save-check-note" checked>
              <span>Author's Note</span>
            </label>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-ghost" id="save-modal-cancel">Cancel</button>
        <button class="btn btn-primary" id="save-modal-confirm">Save Preset</button>
      </div>
    </div>
  </div>

  <!-- Character Edit Modal -->
  <div class="modal-backdrop" id="character-modal">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title" id="character-modal-title">Edit Character</h3>
        <button class="modal-close" id="character-modal-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">Character Name</label>
          <input type="text" class="form-input" id="character-name-input" placeholder="Enter character name">
        </div>
        <div class="form-group">
          <label class="form-label">Saved Fields</label>
          <div class="fields-list" id="character-fields-list">
            <p class="fields-empty">No fields saved yet. Fields are saved automatically when you fill in scenario entry questions.</p>
          </div>
          <div class="field-add">
            <input type="text" class="form-input" id="new-field-key" placeholder="Field name">
            <input type="text" class="form-input" id="new-field-value" placeholder="Value">
            <button class="btn btn-icon" id="add-field-btn" aria-label="Add field">
              <span class="icon-plus"></span>
            </button>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" id="character-delete-btn">Delete</button>
        <div class="modal-footer-spacer"></div>
        <button class="btn btn-ghost" id="character-modal-cancel">Cancel</button>
        <button class="btn btn-primary" id="character-modal-save">Save</button>
      </div>
    </div>
  </div>

  <!-- Hotkey Customization Modal -->
  <div class="modal-backdrop" id="hotkey-modal">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title">Customize Hotkeys</h3>
        <button class="modal-close" id="hotkey-modal-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <div class="modal-body">
        <p class="hotkey-modal-desc">Click on a key to change its binding. Press a new key or Escape to cancel.</p>
        
        <div class="hotkey-editor-section">
          <h4 class="hotkey-editor-title">Actions</h4>
          <div class="hotkey-editor-list" id="hotkey-editor-actions"></div>
        </div>
        
        <div class="hotkey-editor-section">
          <h4 class="hotkey-editor-title">History</h4>
          <div class="hotkey-editor-list" id="hotkey-editor-history"></div>
        </div>
        
        <div class="hotkey-editor-section">
          <h4 class="hotkey-editor-title">Input Modes</h4>
          <div class="hotkey-editor-list" id="hotkey-editor-modes"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" id="hotkey-reset-btn">
          <span class="icon-rotate-ccw"></span>
          Reset to Defaults
        </button>
        <div class="modal-footer-spacer"></div>
        <button class="btn btn-ghost" id="hotkey-modal-cancel">Cancel</button>
        <button class="btn btn-primary" id="hotkey-modal-save">Save</button>
      </div>
    </div>
  </div>

  <!-- Color Customization Modal -->
  <div class="modal-backdrop" id="color-modal">
    <div class="modal">
      <div class="modal-header">
        <h3 class="modal-title">Customize Mode Colors</h3>
        <button class="modal-close" id="color-modal-close" aria-label="Close">
          <span class="icon-x"></span>
        </button>
      </div>
      <div class="modal-body">
        <p class="color-modal-desc">Click on a color to change it. Changes apply instantly.</p>
        
        <div class="color-editor-list" id="color-editor-list">
          <div class="color-editor-item" data-mode="do">
            <span class="color-editor-label">Do</span>
            <input type="color" class="color-editor-input" data-mode="do" value="#3b82f6">
          </div>
          <div class="color-editor-item" data-mode="attempt">
            <span class="color-editor-label">Attempt</span>
            <input type="color" class="color-editor-input" data-mode="attempt" value="#a855f7">
          </div>
          <div class="color-editor-item" data-mode="say">
            <span class="color-editor-label">Say</span>
            <input type="color" class="color-editor-input" data-mode="say" value="#22c55e">
          </div>
          <div class="color-editor-item" data-mode="story">
            <span class="color-editor-label">Story</span>
            <input type="color" class="color-editor-input" data-mode="story" value="#fbbf24">
          </div>
          <div class="color-editor-item" data-mode="see">
            <span class="color-editor-label">See</span>
            <input type="color" class="color-editor-input" data-mode="see" value="#ec4899">
          </div>
          <div class="color-editor-item" data-mode="command">
            <span class="color-editor-label">Command</span>
            <input type="color" class="color-editor-input" data-mode="command" value="#06b6d4">
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" id="color-reset-btn">
          <span class="icon-rotate-ccw"></span>
          Reset to Defaults
        </button>
        <div class="modal-footer-spacer"></div>
        <button class="btn btn-primary" id="color-modal-done">Done</button>
      </div>
    </div>
  </div>

  <!-- Tutorial Welcome Banner -->
  <div class="tutorial-banner hidden" id="tutorial-welcome-banner">
    <div class="tutorial-banner-icon">
      <span class="icon-wand-sparkles"></span>
    </div>
    <div class="tutorial-banner-content">
      <strong>Welcome to BetterDungeon!</strong>
      <span>Take a quick tour to learn the features.</span>
    </div>
    <div class="tutorial-banner-actions">
      <button class="btn btn-ghost btn-sm" id="tutorial-banner-dismiss">Later</button>
      <button class="btn btn-primary btn-sm" id="tutorial-banner-start">Start</button>
    </div>
  </div>

  <!-- Tutorial Overlay System -->
  <div class="tutorial-overlay" id="tutorial-overlay">
    <div class="tutorial-spotlight" id="tutorial-spotlight"></div>
  </div>

  <!-- Tutorial Tooltip -->
  <div class="tutorial-tooltip" id="tutorial-tooltip" data-position="bottom">
    <div class="tutorial-tooltip-arrow"></div>
    <div class="tutorial-tooltip-header">
      <div class="tutorial-tooltip-icon">
        <span class="icon-lightbulb" id="tutorial-tooltip-icon"></span>
      </div>
      <h4 class="tutorial-tooltip-title" id="tutorial-tooltip-title">Feature Title</h4>
    </div>
    <div class="tutorial-tooltip-body">
      <p class="tutorial-tooltip-content" id="tutorial-tooltip-content">Description goes here.</p>
    </div>
    <div class="tutorial-tooltip-footer">
      <div class="tutorial-progress">
        <div class="tutorial-progress-bar">
          <div class="tutorial-progress-fill" id="tutorial-progress-fill"></div>
        </div>
        <span class="tutorial-progress-text" id="tutorial-progress-text">1/12</span>
      </div>
      <div class="tutorial-nav">
        <button class="btn btn-ghost btn-sm" id="tutorial-skip">Skip</button>
        <button class="btn btn-ghost btn-sm" id="tutorial-prev">Back</button>
        <button class="btn btn-primary btn-sm" id="tutorial-next">Next</button>
      </div>
    </div>
  </div>

  <!-- Tutorial Modal -->
  <div class="tutorial-modal" id="tutorial-modal">
    <div class="tutorial-modal-content">
      <div class="tutorial-modal-icon" id="tutorial-modal-icon">
        <span class="icon-wand-sparkles"></span>
      </div>
      <h3 class="tutorial-modal-title" id="tutorial-modal-title">Welcome to BetterDungeon!</h3>
      <p class="tutorial-modal-text" id="tutorial-modal-text">This quick tour will introduce you to the features.</p>
      <div class="tutorial-modal-actions">
        <button class="btn btn-primary" id="tutorial-modal-primary">Start Tour</button>
        <button class="btn btn-ghost" id="tutorial-modal-secondary">Maybe Later</button>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toast-container"></div>

  <script src="services/tutorial-service.js"></script>
  <script src="popup.js"></script>
</body>
</html>
